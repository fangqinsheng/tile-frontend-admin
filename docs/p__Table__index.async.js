"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[311],{47104:function(je,$,r){r.r($),r.d($,{default:function(){return he}});var z=r(28152),g=r.n(z),K=r(13448),i=r.n(K),W=r(77117),B=r.n(W),Y=r(74815),p=r.n(Y),k=r(55595),H=r(25481),L=r(58166),J=r(57762),Q=r(15075),h=r(79136),X=r(59646),R=r(911),q=r(67760),y=r(93236),D=r(65997),e=r(62086),_=function(n){var t=n.modalVisible,s=n.onCancel;return(0,e.jsx)(D.Z,{destroyOnClose:!0,title:"\u65B0\u5EFA",width:420,open:t,onCancel:function(){return s()},footer:null,children:n.children})},ee=_,x=r(31816),re=r(53180),ae=r(35656),b=r(66128),ne=r(3586),ue=r(8835),te=function(n){return(0,e.jsxs)(x.L0,{stepsProps:{size:"small"},stepsFormRender:function(s,v){return(0,e.jsx)(D.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u89C4\u5219\u914D\u7F6E",open:n.updateModalVisible,footer:v,onCancel:function(){return n.onCancel()},children:s})},onFinish:n.onSubmit,children:[(0,e.jsxs)(x.L0.StepForm,{initialValues:{name:n.values.name,nickName:n.values.nickName},title:"\u57FA\u672C\u4FE1\u606F",children:[(0,e.jsx)(re.Z,{width:"md",name:"name",label:"\u89C4\u5219\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"}]}),(0,e.jsx)(ae.Z,{name:"desc",width:"md",label:"\u89C4\u5219\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01",min:5}]})]}),(0,e.jsxs)(x.L0.StepForm,{initialValues:{target:"0",template:"0"},title:"\u914D\u7F6E\u89C4\u5219\u5C5E\u6027",children:[(0,e.jsx)(b.Z,{width:"md",name:"target",label:"\u76D1\u63A7\u5BF9\u8C61",valueEnum:{0:"\u8868\u4E00",1:"\u8868\u4E8C"}}),(0,e.jsx)(b.Z,{width:"md",name:"template",label:"\u89C4\u5219\u6A21\u677F",valueEnum:{0:"\u89C4\u5219\u6A21\u677F\u4E00",1:"\u89C4\u5219\u6A21\u677F\u4E8C"}}),(0,e.jsx)(ne.Z.Group,{name:"type",width:"md",label:"\u89C4\u5219\u7C7B\u578B",options:[{value:"0",label:"\u5F3A"},{value:"1",label:"\u5F31"}]})]}),(0,e.jsxs)(x.L0.StepForm,{initialValues:{type:"1",frequency:"month"},title:"\u8BBE\u5B9A\u8C03\u5EA6\u5468\u671F",children:[(0,e.jsx)(ue.Z,{name:"time",label:"\u5F00\u59CB\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\uFF01"}]}),(0,e.jsx)(b.Z,{name:"frequency",label:"\u76D1\u63A7\u5BF9\u8C61",width:"xs",valueEnum:{month:"\u6708",week:"\u5468"}})]})]})},se=te,A=k.Z.UserController,le=A.addUser,ie=A.queryUserList,de=A.deleteUser,oe=A.modifyUser,ce=function(){var C=p()(i()().mark(function n(t){var s;return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s=h.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),a.prev=1,a.next=4,le(B()({},t));case 4:return s(),h.ZP.success("\u6DFB\u52A0\u6210\u529F"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),s(),h.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},n,null,[[1,9]])}));return function(t){return C.apply(this,arguments)}}(),ve=function(){var C=p()(i()().mark(function n(t){var s;return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s=h.ZP.loading("\u6B63\u5728\u914D\u7F6E"),a.prev=1,a.next=4,oe({userId:t.id||""},{name:t.name||"",nickName:t.nickName||"",email:t.email||""});case 4:return s(),h.ZP.success("\u914D\u7F6E\u6210\u529F"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),s(),h.ZP.error("\u914D\u7F6E\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},n,null,[[1,9]])}));return function(t){return C.apply(this,arguments)}}(),me=function(){var C=p()(i()().mark(function n(t){var s,v;return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(s=h.ZP.loading("\u6B63\u5728\u5220\u9664"),t){d.next=3;break}return d.abrupt("return",!0);case 3:return d.prev=3,d.next=6,de({userId:((v=t.find(function(U){return U.id}))===null||v===void 0?void 0:v.id)||""});case 6:return s(),h.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"),d.abrupt("return",!0);case 11:return d.prev=11,d.t0=d.catch(3),s(),h.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),d.abrupt("return",!1);case 16:case"end":return d.stop()}},n,null,[[3,11]])}));return function(t){return C.apply(this,arguments)}}(),fe=function(){var n=(0,y.useState)(!1),t=g()(n,2),s=t[0],v=t[1],a=(0,y.useState)(!1),d=g()(a,2),U=d[0],w=d[1],pe=(0,y.useState)({}),I=g()(pe,2),P=I[0],T=I[1],j=(0,y.useRef)(),Ce=(0,y.useState)(),M=g()(Ce,2),m=M[0],Fe=M[1],ye=(0,y.useState)([]),N=g()(ye,2),Z=N[0],G=N[1],V=[{title:"\u540D\u79F0",dataIndex:"name",tip:"\u540D\u79F0\u662F\u552F\u4E00\u7684 key",formItemProps:{rules:[{required:!0,message:"\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u6635\u79F0",dataIndex:"nickName",valueType:"text"},{title:"\u6027\u522B",dataIndex:"gender",hideInForm:!0,valueEnum:{0:{text:"\u7537",status:"MALE"},1:{text:"\u5973",status:"FEMALE"}}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(l,u){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{onClick:function(){w(!0),T(u)},children:"\u914D\u7F6E"}),(0,e.jsx)(X.Z,{type:"vertical"}),(0,e.jsx)("a",{href:"",children:"\u8BA2\u9605\u8B66\u62A5"})]})}}];return(0,e.jsxs)(H._z,{header:{title:"CRUD \u793A\u4F8B"},children:[(0,e.jsx)(L.Z,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:j,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,e.jsx)(R.ZP,{type:"primary",onClick:function(){return v(!0)},children:"\u65B0\u5EFA"},"1")]},request:function(){var o=p()(i()().mark(function l(u,f,F){var c,E,O;return i()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,ie(B()(B()({},u),{},{sorter:f,filter:F}));case 2:return c=S.sent,E=c.data,O=c.success,S.abrupt("return",{data:(E==null?void 0:E.list)||[],success:O});case 6:case"end":return S.stop()}},l)}));return function(l,u,f){return o.apply(this,arguments)}}(),columns:V,rowSelection:{onChange:function(l,u){return G(u)}}}),(Z==null?void 0:Z.length)>0&&(0,e.jsxs)(J.S,{extra:(0,e.jsxs)("div",{children:["\u5DF2\u9009\u62E9"," ",(0,e.jsx)("a",{style:{fontWeight:600},children:Z.length})," ","\u9879\xA0\xA0"]}),children:[(0,e.jsx)(R.ZP,{onClick:p()(i()().mark(function o(){var l,u;return i()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,me(Z);case 2:G([]),(l=j.current)===null||l===void 0||(u=l.reloadAndRest)===null||u===void 0||u.call(l);case 4:case"end":return F.stop()}},o)})),children:"\u6279\u91CF\u5220\u9664"}),(0,e.jsx)(R.ZP,{type:"primary",children:"\u6279\u91CF\u5BA1\u6279"})]}),(0,e.jsx)(ee,{onCancel:function(){return v(!1)},modalVisible:s,children:(0,e.jsx)(L.Z,{onSubmit:function(){var o=p()(i()().mark(function l(u){var f;return i()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,ce(u);case 2:f=c.sent,f&&(v(!1),j.current&&j.current.reload());case 4:case"end":return c.stop()}},l)}));return function(l){return o.apply(this,arguments)}}(),rowKey:"id",type:"form",columns:V})}),P&&Object.keys(P).length?(0,e.jsx)(se,{onSubmit:function(){var o=p()(i()().mark(function l(u){var f;return i()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,ve(u);case 2:f=c.sent,f&&(w(!1),T({}),j.current&&j.current.reload());case 4:case"end":return c.stop()}},l)}));return function(l){return o.apply(this,arguments)}}(),onCancel:function(){w(!1),T({})},updateModalVisible:U,values:P}):null,(0,e.jsx)(q.Z,{width:600,open:!!m,onClose:function(){Fe(void 0)},closable:!1,children:(m==null?void 0:m.name)&&(0,e.jsx)(Q.vY,{column:2,title:m==null?void 0:m.name,request:p()(i()().mark(function o(){return i()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",{data:m||{}});case 1:case"end":return u.stop()}},o)})),params:{id:m==null?void 0:m.name},columns:V})})]})},he=fe}}]);
